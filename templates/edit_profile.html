{% extends "base.html" %}
{% block content %}

<!-- Edit User Profile Form -->
<div class="row">
    <form class="card-panel col s12 m10 offset-m1 l6 offset-l3" method="POST" action="{{ url_for('edit_profile') }}">        
        <h3 class="center-align">
            Edit {{ username }}'s Profile
        </h3>
        <!-- User Profile Image -->
        <div id="profile-url-container" class="col s12 m6 offset-m3 center-align">
            <p class="edit-img-text">Current Image</p>
                <img class="user-img circle" src="{{ image }}" alt="{{ username }}'s' profile photo">
            <p id="prof-img" class="edit-img-text"></p>
        </div>
        <div class="input-field col s12 m6 offset-m3 center-align">
            <i class="far fa-image prefix" aria-hidden="true"></i>
            <input value="{{ image }}" placeholder="Image URL" id="user_image" name="user_image" 
                type="url" onchange="userImage();" pattern="https://.*" class="validate">
            <label for="user_image">Profile Image or Avatar</label>            
        </div>
        <!-- User Profile Details -->            
        <!-- City Input Field -->
        <div class="input-field col s12 m6 offset-m3 center-align">
            <i class="fas fa-map-marker-alt prefix" aria-hidden="true"></i>
            <input value="{{ city }}" placeholder="Town/City where you live" id="city" 
                name="city" type="text" class="validate" pattern="^[A-Za-z]$" required>
            <label for="city">Town/City</label>
        </div>                
        <!-- Subscription Status Switch -->
        <div class="switch col s12 m6 offset-m3 center-align">
            <span>Subscribe to this website: </span>
            <label for="subscribed">
                No
                {% if subscribed == "on" %}
                    <input type="checkbox" id="subscribed" name="subscribed" checked>
                {% else %}
                    <input type="checkbox" id="subscribed" name="subscribed">
                {% endif %}
                    <span id="edit-switch" class="lever"></span>
                Yes
            </label>
        </div>
        <!-- Email Input Field -->
        <div id="subs-email" class="input-field col s12 m6 offset-m3 center-align">
            <i class="fas fa-envelope prefix" aria-hidden="true"></i>            
            <input value="{{ email }}" placeholder="john.smith@email.com" id="email" name="email"            
                type="email" class="validate" required>            
            <label for="email">Email Address</label>
        </div>
        <!-- Cancel Button -->
        <div class="row center-align">
            <div id="profile-edit" class="col s6 right-align">
                <a id="pro-edit-cancel" href="{{ url_for('profile', username=session['user']) }}" class="btn red darken-4">
                    Cancel <i class="fas fa-times-circle right" aria-hidden="true"></i>
                </a>
            </div>
                <!-- Submit Button -->
            <div class="col s6 left-align">
                <button class="btn waves-effect waves-light light-green darken-4" type="submit" name="action">
                    Save Edits <i class="fas fa-check-circle right" aria-hidden="true"></i>
                </button>
            </div>    
        </div>
    </form>    
</div>

{% endblock %}